@using PKure.Models
@using PKure.Services
@inject LanguageService LanguageService

<div @onclick="HandleClick" class="poke-card @(IsSelected ? "selected" : "")">
    <img src="@Pokemon.ImageUrl" alt="@Pokemon.SpeciesDetails.GetLocalizedName(LanguageService.CurrentLanguage)" />
    <h3>@Pokemon.SpeciesDetails.GetLocalizedName(LanguageService.CurrentLanguage)</h3>
    <p>Tipo: @string.Join(", ", Pokemon.Types.Select(t => t.Details.GetLocalizedName(LanguageService.CurrentLanguage)))</p>
</div>

@code {
    [Parameter]
    public Pokemon Pokemon { get; set; }

    [Parameter]
    public EventCallback<Pokemon> OnClick { get; set; }

    [Parameter]
    public bool IsSelected { get; set; }

    protected override void OnInitialized()
    {
        LanguageService.LanguageChanged += (sender, language) => StateHasChanged();
    }

    private async Task HandleClick()
    {
        await OnClick.InvokeAsync(Pokemon);
    }
}